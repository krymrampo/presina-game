<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Presina - Gioco di Carte Online</title>
    <link rel="stylesheet" href="/static/css/style.css?v=20260129g">
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
    <div id="app">
        <!-- HOME SCREEN -->
        <div id="home-screen" class="screen active">
            <div class="home-container">
                <h1 class="title">üÉè Presina</h1>
                <p class="subtitle">Il gioco di carte napoletano online</p>
                
                <div class="input-group">
                    <label for="player-name">Il tuo nome:</label>
                    <input type="text" id="player-name" maxlength="20" placeholder="Inserisci il tuo nome...">
                </div>
                
                <div class="button-group">
                    <button id="btn-enter-lobby" class="btn btn-primary">Entra nella Lobby</button>
                    <button id="btn-rules" class="btn btn-secondary">üìñ Regole</button>
                </div>
            </div>
        </div>

        <!-- RULES SCREEN -->
        <div id="rules-screen" class="screen">
            <div class="rules-container">
                <h2>üìñ Regole di Presina</h2>
                <div class="rules-content">
                    <h3>Obiettivo</h3>
                    <p>Indovinare quante mani vincerai in ogni turno. Chi indovina non perde vite, chi sbaglia perde 1 vita.</p>
                    
                    <h3>Setup</h3>
                    <ul>
                        <li>2-8 giocatori, ognuno parte con 5 vite</li>
                        <li>Si giocano 5 turni con 5, 4, 3, 2, 1 carte</li>
                        <li>Mazzo: 40 carte napoletane (Bastoni, Spade, Coppe, Ori)</li>
                    </ul>
                    
                    <h3>Forza delle carte</h3>
                    <p>Ordine semi: Bastoni &lt; Spade &lt; Coppe &lt; Ori</p>
                    <p>Ordine valori: Asso &lt; 2 &lt; ... &lt; 7 &lt; Fante &lt; Cavallo &lt; Re</p>
                    
                    <h3>Turno Speciale (1 carta)</h3>
                    <p>Nel turno con 1 carta, vedi le carte degli altri ma NON la tua!</p>
                    
                    <h3>Puntata</h3>
                    <p>L'ultimo giocatore a puntare NON pu√≤ scegliere il numero che renderebbe la somma totale uguale alle carte in gioco.</p>
                    
                    <h3>Il Jolly (Asso di Ori)</h3>
                    <ul>
                        <li><strong>Prende:</strong> diventa la carta pi√π forte (sopra il Re di Ori)</li>
                        <li><strong>Lascia:</strong> diventa la carta pi√π debole (sotto l'Asso di Bastoni)</li>
                    </ul>
                    
                    <h3>Vittoria</h3>
                    <p>Dopo 5 turni, vince chi ha pi√π vite!</p>
                </div>
                <button id="btn-back-home" class="btn btn-secondary">‚Üê Torna alla Home</button>
            </div>
        </div>

        <!-- LOBBY SCREEN -->
        <div id="lobby-screen" class="screen">
            <div class="lobby-container">
                <div class="lobby-header">
                    <h2>üè† Lobby</h2>
                    <span id="player-name-display" class="player-badge"></span>
                </div>
                
                <div id="existing-room-banner" class="banner hidden">
                    <span>Sei gi√† in una stanza!</span>
                    <button id="btn-rejoin" class="btn btn-small">Rientra</button>
                </div>
                
                <div class="lobby-actions">
                    <div class="search-box">
                        <input type="text" id="room-search" placeholder="Cerca stanza...">
                        <button id="btn-search" class="btn btn-small">üîç</button>
                    </div>
                    <button id="btn-create-room" class="btn btn-primary">+ Crea Stanza</button>
                </div>
                
                <div id="rooms-list" class="rooms-list">
                    <p class="empty-message">Nessuna stanza disponibile. Creane una!</p>
                </div>
                
                <button id="btn-back-home-lobby" class="btn btn-secondary">‚Üê Torna alla Home</button>
            </div>
            
            <!-- Create Room Modal -->
            <div id="create-room-modal" class="modal hidden">
                <div class="modal-content">
                    <h3>Crea Nuova Stanza</h3>
                    <div class="input-group">
                        <label for="room-name">Nome stanza:</label>
                        <input type="text" id="room-name" maxlength="30" placeholder="Nome della stanza...">
                    </div>
                    <div class="button-group">
                        <button id="btn-confirm-create" class="btn btn-primary">Crea</button>
                        <button id="btn-cancel-create" class="btn btn-secondary">Annulla</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- WAITING ROOM SCREEN -->
        <div id="waiting-room-screen" class="screen">
            <div class="waiting-container">
                <div class="room-header">
                    <h2 id="room-title">Stanza</h2>
                    <span id="room-status" class="status-badge">In attesa</span>
                </div>
                
                <div id="waiting-players" class="players-grid">
                    <!-- Players will be rendered here -->
                </div>
                
                <div id="admin-controls" class="admin-controls hidden">
                    <button id="btn-start-game" class="btn btn-primary btn-large">‚ñ∂ Avvia Partita</button>
                    <p class="hint">Servono almeno 2 giocatori</p>
                    <button id="btn-add-dummy" class="btn btn-secondary">ü§ñ Aggiungi giocatore fittizio</button>
                </div>
                
                <div class="waiting-actions">
                    <button id="btn-leave-room" class="btn btn-secondary">üö™ Abbandona</button>
                </div>
                
                <!-- Chat in waiting room -->
                <div class="waiting-chat">
                    <div id="waiting-chat-messages" class="chat-messages"></div>
                    <div class="chat-input-area">
                        <input type="text" id="waiting-chat-input" maxlength="200" placeholder="Scrivi un messaggio...">
                        <button id="btn-send-waiting-chat" class="btn btn-small">Invia</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- GAME SCREEN -->
        <div id="game-screen" class="screen">
            <div class="game-container">
                <!-- Header -->
                <div class="game-header">
                    <div class="turn-info">
                        <span id="turn-number">Turno 1/5</span>
                        <span id="cards-info">5 carte</span>
                        <span id="turn-timer" class="turn-timer hidden"></span>
                    </div>
                    <div id="phase-indicator" class="phase-indicator">Puntate</div>
                </div>
                
                <!-- Spectator/Join Banner -->
                <div id="spectator-banner" class="banner hidden">
                    <span>üëÅÔ∏è Sei spettatore. Giocherai dal prossimo turno.</span>
                </div>
                
                <!-- Main Game Area -->
                <div class="game-main">
                    <!-- Left Panel: Hand -->
                    <div class="hand-panel">
                        <h3>Le tue carte</h3>
                        <div id="player-hand" class="hand-area">
                            <!-- Cards will be rendered here -->
                        </div>
                        <div id="special-turn-note" class="special-note hidden">
                            ‚ö†Ô∏è Turno speciale: vedi le carte degli altri, non le tue!
                        </div>
                        <div id="others-cards" class="others-cards hidden">
                            <!-- Other players' cards in special turn -->
                        </div>
                    </div>
                    
                    <!-- Center: Table -->
                    <div class="table-area">
                        <div id="table-center" class="table-center">
                            <div id="played-cards" class="played-cards">
                                <!-- Played cards go here -->
                            </div>
                            <div id="trick-info" class="trick-info">Mano 1</div>
                        </div>
                        
                        <!-- Player positions around table -->
                        <div id="table-positions" class="table-positions">
                            <!-- 8 player slots rendered by JS -->
                        </div>
                    </div>
                    
                    <!-- Right Panel: Players Info -->
                    <div class="players-panel">
                        <h3>Giocatori</h3>
                        <div id="players-info" class="players-info">
                            <!-- Player info cards -->
                        </div>
                    </div>
                </div>
                
                <!-- Betting Area -->
                <div id="betting-area" class="betting-area hidden">
                    <h3>Fai la tua puntata</h3>
                    <div id="bet-buttons" class="bet-buttons">
                        <!-- Bet buttons rendered by JS -->
                    </div>
                    <p id="forbidden-bet-note" class="forbidden-note hidden"></p>
                </div>
                
                <!-- Jolly Choice -->
                <div id="jolly-choice" class="jolly-choice hidden">
                    <h3>üÉè Hai giocato l'Asso di Ori!</h3>
                    <p>Scegli come usarlo:</p>
                    <div class="jolly-buttons">
                        <button id="btn-jolly-prende" class="btn btn-primary">üí™ Prende (Pi√π Forte)</button>
                        <button id="btn-jolly-lascia" class="btn btn-secondary">ü™∂ Lascia (Pi√π Debole)</button>
                    </div>
                </div>
                
                <!-- Trick Winner Popup -->
                <div id="trick-winner-overlay" class="trick-winner-overlay hidden"></div>
                <div id="trick-winner-popup" class="trick-winner-popup hidden">
                    <div class="trick-winner-content">
                        <div class="trick-winner-icon">üèÜ</div>
                        <h3>Mano Vinta!</h3>
                        <p id="trick-winner-name">Giocatore</p>
                        <p id="trick-winner-card" class="trick-winner-card">con la carta</p>
                    </div>
                </div>
                
                <!-- Turn Results -->
                <div id="turn-results" class="turn-results hidden">
                    <h3>Risultati del Turno</h3>
                    <div id="results-list" class="results-list"></div>
                    <button id="btn-next-turn" class="btn btn-primary">Prossimo Turno</button>
                    <div id="ready-count" class="ready-count">Pronti: 0/0</div>
                </div>
                
                <!-- Card Confirm Popup -->
                <div id="card-confirm-overlay" class="card-confirm-overlay hidden"></div>
                <div id="card-confirm" class="card-confirm hidden">
                    <p>Conferma carta: <span id="selected-card-name"></span></p>
                    <div class="button-group">
                        <button id="btn-confirm-card" class="btn btn-primary">‚úì Gioca</button>
                        <button id="btn-cancel-card" class="btn btn-secondary">‚úó Annulla</button>
                    </div>
                </div>
                
                <!-- Chat -->
                <div class="game-chat" id="game-chat">
                    <div class="chat-header" id="chat-toggle">
                        <span>üí¨ Chat <span id="chat-badge" class="chat-badge hidden">!</span></span>
                        <span class="chat-toggle-icon">‚ñº</span>
                    </div>
                    <div class="chat-body" id="chat-body">
                        <div id="chat-messages" class="chat-messages"></div>
                        <div class="chat-input-area">
                            <input type="text" id="chat-input" maxlength="200" placeholder="Messaggio...">
                            <button id="btn-send-chat" class="btn btn-small">‚Üí</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- GAME OVER SCREEN -->
        <div id="game-over-screen" class="screen">
            <div class="game-over-container">
                <h2>üèÜ Partita Terminata!</h2>
                <div id="final-standings" class="standings">
                    <!-- Final standings -->
                </div>
                <button id="btn-back-lobby" class="btn btn-primary">Torna alla Lobby</button>
            </div>
        </div>
    </div>
    
    <script src="/static/js/main.js?v=20260129g"></script>
    <script src="/static/js/socket_client.js?v=20260129g"></script>
    <script src="/static/js/game_ui.js?v=20260129g"></script>
    <script src="/static/js/chat.js?v=20260129g"></script>
</body>
</html>
